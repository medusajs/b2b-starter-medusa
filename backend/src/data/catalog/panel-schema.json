{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "YSH Solar Panels Catalog Schema",
  "description": "Schema para validação do catálogo de painéis fotovoltaicos comercializados pela Yello Solar Hub",
  "type": "object",
  "required": ["metadata", "panels"],
  "properties": {
    "metadata": {
      "type": "object",
      "required": ["version", "last_updated", "sources", "currency"],
      "properties": {
        "version": {"type": "string", "pattern": "^\\d+\\.\\d+\\.\\d+$"},
        "last_updated": {"type": "string", "format": "date"},
        "sources": {"type": "array", "items": {"type": "string"}},
        "currency": {"type": "string", "enum": ["BRL", "USD"]},
        "notes": {"type": "string"}
      }
    },
    "panels": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["sku", "manufacturer", "model", "technology", "kwp", "cells", "efficiency_pct", "warranty_years", "price_brl", "source", "tier_recommendation"],
        "properties": {
          "sku": {"type": "string", "pattern": "^[A-Z0-9\\-]+$"},
          "manufacturer": {"type": "string"},
          "model": {"type": "string"},
          "technology": {"type": "string", "enum": ["Monocristalino", "Monocristalino PERC", "Monocristalino PERC Half-Cell", "Monocristalino Half-Cell (dopagem Gálio)", "N-Type TOPCon", "N-Type TOPCon Bifacial", "N-Type Tiger Neo Bifacial", "N-Type Bifacial", "N-Type Monocristalino Full Black", "HJT (Heterojunction) Bifacial", "Policristalino"]},
          "kwp": {"type": "number", "minimum": 0.001, "maximum": 1.0},
          "cells": {"type": "integer", "minimum": 30, "maximum": 200},
          "efficiency_pct": {"type": "number", "minimum": 15.0, "maximum": 25.0},
          "dimensions_mm": {
            "type": "object",
            "properties": {
              "length": {"type": "integer"},
              "width": {"type": "integer"},
              "thickness": {"type": "integer"}
            }
          },
          "weight_kg": {"type": "number", "minimum": 0.5},
          "warranty_years": {
            "type": "object",
            "required": ["product", "performance"],
            "properties": {
              "product": {"type": "integer", "minimum": 5, "maximum": 30},
              "performance": {"type": "integer", "minimum": 5, "maximum": 30}
            }
          },
          "price_brl": {"type": "number", "minimum": 0},
          "source": {"type": "string", "enum": ["NeoSolar", "Solfácil", "ODEX", "Fortlev"]},
          "tier_recommendation": {
            "type": "array",
            "items": {"type": "string", "enum": ["XPP", "PP", "P", "M", "G", "GG", "XG", "XGG"]}
          },
          "use_cases": {"type": "array", "items": {"type": "string"}},
          "bifacial": {"type": "boolean"},
          "bifaciality_pct": {"type": "number", "minimum": 60, "maximum": 95},
          "certifications": {"type": "array", "items": {"type": "string"}}
        }
      }
    }
  }
}
