# ============================================================
# Environment Configuration Template
# Copy this to .env.production on your server
# ============================================================

# ============================================================
# Basic Configuration
# ============================================================
NODE_ENV=production
PORT=9000
HOST=0.0.0.0

# ============================================================
# Database (RDS PostgreSQL)
# ============================================================
# Option 1: Use full DATABASE_URL (recommended for AWS Secrets Manager)
DATABASE_URL=postgresql://username:password@host:5432/database

# Option 2: Individual components (if not using full URL)
# DATABASE_HOST=ysh-db-production.xxxxx.us-east-1.rds.amazonaws.com
# DATABASE_PORT=5432
# DATABASE_NAME=yshdb
# DATABASE_USER=ysh_app
# DATABASE_PASSWORD=YOUR_SECURE_PASSWORD

# SSL Configuration (required for RDS)
DATABASE_SSL=true
DATABASE_SSL_REJECT_UNAUTHORIZED=false

# ============================================================
# Authentication & Security
# ============================================================
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=YOUR_64_CHAR_JWT_SECRET_HERE
COOKIE_SECRET=YOUR_64_CHAR_COOKIE_SECRET_HERE

# ============================================================
# CORS Configuration
# ============================================================
STORE_CORS=https://store.yshsolar.com,https://www.yshsolar.com
ADMIN_CORS=https://admin.yshsolar.com
AUTH_CORS=https://admin.yshsolar.com

# Development alternative:
# STORE_CORS=http://localhost:8000
# ADMIN_CORS=http://localhost:7000,http://localhost:7001
# AUTH_CORS=http://localhost:7000,http://localhost:7001

# ============================================================
# Redis (Optional - for caching)
# ============================================================
# REDIS_URL=redis://username:password@host:6379
# Or for AWS ElastiCache with TLS:
# REDIS_URL=rediss://ysh-redis.xxxxx.cache.amazonaws.com:6379

# ============================================================
# File Storage - AWS S3
# ============================================================
FILE_S3_URL=https://ysh-media-production.s3.us-east-1.amazonaws.com
FILE_S3_BUCKET=ysh-media-production
FILE_S3_REGION=us-east-1
FILE_S3_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
FILE_S3_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY

# Optional: CloudFront CDN URL (recommended for production)
# FILE_S3_URL=https://d1234567890.cloudfront.net

# ============================================================
# AI & RAG System - OpenAI
# ============================================================
# Get your key at: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Optional: Organization ID (if using OpenAI organization)
# OPENAI_ORG_ID=org-xxxxxxxxxxxxxxxxxxxxxxxx

# ============================================================
# AI & RAG System - Qdrant Vector Database
# ============================================================
# For Qdrant Cloud:
QDRANT_URL=https://xxxxx-xxxxx-xxxxx.us-east-1-0.aws.cloud.qdrant.io
QDRANT_API_KEY=YOUR_QDRANT_API_KEY

# For self-hosted Qdrant:
# QDRANT_URL=http://qdrant:6333
# QDRANT_API_KEY= (leave empty if no auth)

# ============================================================
# Medusa Admin Configuration
# ============================================================
# Admin panel path (default: /app)
# ADMIN_PATH=/app

# Medusa backend URL (for admin to connect)
MEDUSA_BACKEND_URL=https://api.yshsolar.com

# ============================================================
# Migration Control (from entrypoint.sh)
# ============================================================
# Set to true to skip migrations on startup (for debugging)
SKIP_MIGRATIONS=false

# Set to true to fail startup if migrations fail
FAIL_ON_MIGRATION_ERROR=true

# ============================================================
# Logging & Monitoring
# ============================================================
# Log level (debug, info, warn, error)
LOG_LEVEL=info

# Enable JSON structured logging
LOG_FORMAT=json

# ============================================================
# Performance & Limits
# ============================================================
# Node.js memory limit (in MB)
NODE_OPTIONS=--max-old-space-size=2048

# Request timeout (in ms)
REQUEST_TIMEOUT=30000

# ============================================================
# Feature Flags
# ============================================================
# Enable telemetry (Medusa analytics)
# MEDUSA_TELEMETRY_DISABLED=true

# Enable development features
# ENABLE_DEV_FEATURES=false

# ============================================================
# External Services (Optional)
# ============================================================
# Stripe payment gateway
# STRIPE_API_KEY=sk_live_xxxxx
# STRIPE_WEBHOOK_SECRET=whsec_xxxxx

# Email service (SendGrid, SES, etc.)
# SENDGRID_API_KEY=SG.xxxxx
# SENDGRID_FROM_EMAIL=noreply@yshsolar.com

# SMS service (Twilio, SNS, etc.)
# TWILIO_ACCOUNT_SID=ACxxxxx
# TWILIO_AUTH_TOKEN=xxxxx
# TWILIO_PHONE_NUMBER=+1234567890

# ============================================================
# Backup & Disaster Recovery
# ============================================================
# S3 bucket for database backups
# BACKUP_S3_BUCKET=ysh-backups-production
# BACKUP_S3_REGION=us-east-1

# ============================================================
# Notes
# ============================================================
# 1. NEVER commit this file with real values to Git
# 2. Use AWS Secrets Manager for production (recommended)
# 3. Rotate secrets regularly (30-90 days)
# 4. Use strong passwords (32+ characters)
# 5. Enable MFA for AWS accounts with access to secrets
# 6. Monitor secret access with CloudTrail
# 7. Use separate secrets for each environment
#
# For AWS Secrets Manager integration, see:
# - docs/AWS_SECRETS_GUIDE.md
# - scripts/aws/load-secrets.sh
